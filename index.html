<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MZK ELITE">
    
    <link rel="icon" type="image/png" href="mzk_banner.png">
    <link rel="apple-touch-icon" href="mzk_banner.png">
    <meta name="msapplication-TileImage" content="mzk_banner.png">

    <title>MZK ELITE 2026 - ULTIMATE</title>
    <style>
        :root {
            --primary: #ff2b2b;
            --primary-glow: rgba(255, 43, 43, 0.4);
            --bg: #050505;
            --card: rgba(25, 25, 25, 0.9);
            --gold: #ffd700;
            --coin: #ff9900;
            --blue: #0088ff;
            --text: #ffffff;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            margin: 0;
            background: var(--bg);
            background-image: radial-gradient(circle at top, #1a0505 0%, #050505 100%);
            color: var(--text);
            font-family: 'Segoe UI', Roboto, sans-serif;
            padding: env(safe-area-inset-top) 15px 40px 15px;
        }

        #app { max-width: 500px; margin: 0 auto; }

        .header { text-align: center; padding: 20px 0; }
        .logo-img { width: 130px; border-radius: 15px; filter: drop-shadow(0 0 15px var(--primary-glow)); border: 1px solid rgba(255,255,255,0.1); }
        
        .card {
            background: var(--card);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        h2 { font-size: 0.75rem; color: var(--primary); text-transform: uppercase; letter-spacing: 2px; margin: 25px 0 12px; display: flex; align-items: center; gap: 8px; }
        h2::after { content: ""; flex: 1; height: 1px; background: linear-gradient(90deg, var(--primary), transparent); }

        .lvl-display { font-size: 2.5rem; font-weight: 900; color: var(--primary); text-shadow: 0 0 15px var(--primary-glow); margin: 0; }
        
        .bar-container { background: rgba(0,0,0,0.5); height: 12px; border-radius: 6px; overflow: hidden; margin: 12px 0; border: 1px solid rgba(255,255,255,0.1); }
        .bar-fill { height: 100%; background: linear-gradient(90deg, var(--primary), #ff6b6b); width: 0%; transition: 1s cubic-bezier(0.17, 0.67, 0.83, 0.67); }

        button {
            background: var(--primary); color: white; border: none; padding: 14px; border-radius: 12px;
            font-weight: 800; cursor: pointer; transition: 0.2s; font-size: 0.75rem; width: 100%;
        }
        button:active { transform: scale(0.96); }
        button:disabled { background: #222; color: #555; cursor: not-allowed; }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .shop-item { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 15px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }

        .rank-row { display: flex; justify-content: space-between; padding: 12px; border-radius: 10px; margin-bottom: 6px; background: rgba(255,255,255,0.03); }
        .player-active { background: var(--primary-glow); border: 1px solid var(--primary); }

        #log { height: 140px; overflow-y: auto; font-size: 0.75rem; color: #888; display: flex; flex-direction: column-reverse; }
        .bot-msg { color: var(--gold); font-weight: bold; }
        .cosmin-msg { color: #ff0055; font-weight: 900; }

        canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 100; }
    </style>
</head>
<body onclick="initAudio()">

    <canvas id="confetti"></canvas>

    <div id="app">
        <div class="header">
            <img src="mzk_banner.png" alt="MZK LOGO" class="logo-img">
            <div id="rankTitle" style="color: var(--gold); font-size: 0.7rem; margin-top: 10px; font-weight: bold;">DIVIS√ÉO: BRONZE</div>
        </div>

        <div id="bossCard" class="card" style="display: none; border: 2px solid var(--primary); background: linear-gradient(180deg, #300, #000);">
            <div style="display:flex; justify-content:space-between; font-size:0.7rem; color:var(--primary); font-weight:900;">
                <span>üëæ BOSS: A PREGUI√áA ABISSAL</span>
                <span id="bossHpTxt">1000/1000 HP</span>
            </div>
            <div class="bar-container"><div id="bossBar" class="bar-fill" style="background: red; width: 100%"></div></div>
        </div>

        <div class="card" style="text-align: center;">
            <p id="lvlDisplay" class="lvl-display">LVL 1</p>
            <div id="streakDisplay" style="color: var(--gold); font-size: 0.8rem; margin: 5px 0;">üî• Streak: 0 dias</div>
            <div class="bar-container"><div id="xpBar" class="bar-fill"></div></div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 0.8rem;">
                <span style="color: var(--coin);">üí∞ <span id="coins">0</span> MZK</span>
                <span id="xp2x" style="color: var(--gold); display: none;">‚ö° 2X XP ATIVO</span>
            </div>
        </div>

        <h2>Loja MZK & Invent√°rio</h2>
        <div class="card">
            <div class="grid-2">
                <div class="shop-item">
                    <div style="font-size:0.6rem; margin-bottom:5px;">üöÄPO√á√ÉO XP (1H)</div>
                    <button onclick="buy('xp', 150)">150c</button>
                </div>
                <div class="shop-item">
                    <div style="font-size:0.6rem; margin-bottom:5px;">üçîFAST FOOD</div>
                    <button onclick="buy('food', 500)">500c</button>
                </div>
            </div>
            <div id="inv" style="margin-top:10px; display:flex; gap:5px; flex-wrap:wrap;"></div>
        </div>

        <h2>Banca do MT_</h2>
        <div class="card">
            <button id="betBtn" onclick="bet()" style="background:var(--gold); color:#000;">APOSTAR 100c NO TREINO</button>
            <div id="betLabel" style="font-size:0.6rem; text-align:center; margin-top:8px; color:var(--gold);"></div>
        </div>

        <h2>Ranking Global</h2>
        <div class="card" id="rankList"></div>

        <h2>Checklist: Refei√ß√µes</h2>
        <div class="card">
            <div class="grid-2" id="mealArea">
                </div>
        </div>

        <h2>Treino & Hidrata√ß√£o</h2>
        <div class="card">
            <select id="gymType" style="width:100%; padding:12px; background:#000; color:#fff; border:1px solid #444; border-radius:10px; margin-bottom:10px;">
                <option value="Peito">Peito & Tr√≠ceps</option>
                <option value="Costas">Costas & B√≠ceps</option>
                <option value="Pernas">Pernas (Hardcore)</option>
                <option value="Boxe">ü•ä Boxe</option>
            </select>
            <button id="gymBtn" onclick="doGym()">Finalizar Treino do Dia</button>
            
            <div style="margin-top: 20px;">
                <div style="display:flex; justify-content:space-between; font-size:0.7rem; margin-bottom:5px;">
                    <span>üíß HIDRATA√á√ÉO</span>
                    <span id="waterTxt">0/3000ml</span>
                </div>
                <div class="bar-container"><div id="waterBar" class="bar-fill" style="background:var(--blue)"></div></div>
                <div class="grid-2">
                    <button onclick="drink(250)" style="background:var(--blue)">+250ml</button>
                    <button onclick="drink(1000)" style="background:var(--blue)">+1L</button>
                </div>
            </div>
        </div>

        <h2>Log de Provoca√ß√µes</h2>
        <div class="card" id="log"></div>
    </div>

    <script>
        let audioCtx = null;
        let s = { xp:0, lvl:1, coins:0, water:0, streak:0, tasks:{gym:false, meals:[]}, inv:[], bet:false, x2:false, last:new Date().toLocaleDateString(), boss:1000 };
        
        let bots = [
            {n:"Cosmin", l:14, st:8},
            {n:"Pedrin MDM", l:12, st:5},
            {n:"Mt_", l:6, st:10},
            {n:"Vitinn", l:8, st:2}
        ];

        const botLines = { 
            "Pedrin MDM": ["Mant√©m o foco seu merdinha.", "A disciplina √© a chave brow.", "Ta louco, ta louco, muito empenho"], 
            "Mt_": ["Mlk, a banca nunca perde.", "Pagou a aposta?"], 
            "Vitinn": ["Bebeu √°gua hoje?", "Voc√™ ta mais devagar que eu que fumo o dia inteiro, mano haha."],
            "Cosmin": ["Ainda nesse n√≠vel? Que embara√ßoso.", "Olha para o ranking e chora, MZK.", "O meu av√¥ treina mais que tu.", "Desiste, o topo √© meu.", "Subi de n√≠vel enquanto voc√™ dormia, fraco.", "Uma tartaruga √© mais rapida que voc√™ kkkkk."]
        };

        function initAudio() { if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
        function sound(f, d=0.1) {
            if(!audioCtx) return;
            const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
            o.connect(g); g.connect(audioCtx.destination);
            o.frequency.value=f; g.gain.value=0.1; o.start(); o.stop(audioCtx.currentTime+d);
        }

        function notify(t, b) { if (Notification.permission === "granted") new Notification(t, { body:b, icon:'mzk_banner.png' }); }

        function save() { localStorage.setItem('mzk_mega_2026', JSON.stringify(s)); }
        function load() {
            const data = localStorage.getItem('mzk_mega_2026');
            if(data) {
                let p = JSON.parse(data);
                const hoje = new Date().toLocaleDateString();
                if(p.last !== hoje) {
                    if(p.bet && !p.tasks.gym) addLog("Mt_: 'Perbeste a aposta!'", true, "Mt_");
                    if(p.tasks.gym) p.streak++; else p.streak = 0;
                    p.tasks = {gym:false, meals:[]}; p.water=0; p.bet=false; p.last=hoje;
                }
                s = p;
            }
            render();
        }

        function addXP(v, msg) {
            let gain = s.x2 ? v*2 : v;
            s.xp += gain; s.coins += 15;
            if(new Date().getDay() === 0) s.boss = Math.max(0, s.boss - gain);
            if(s.xp >= 100) { s.lvl++; s.xp = 0; sound(523, 0.3); createConfetti(); } else sound(800, 0.05);
            addLog(`+${gain}XP: ${msg}`); save(); render();
        }

        function drink(v) { s.water = Math.min(3000, s.water+v); addXP(5, "Hidrata√ß√£o"); }
        function doGym() { if(!s.tasks.gym) { s.tasks.gym = true; if(s.bet) { s.coins += 250; s.bet = false; addLog("Mt_: 'Aposta paga.'", true, "Mt_"); } addXP(50, "Treino Di√°rio"); } }
        function toggleMeal(m) { if(!s.tasks.meals.includes(m)) { s.tasks.meals.push(m); addXP(15, `Refei√ß√£o: ${m}`); } }
        function bet() { if(!s.bet && s.coins >= 100) { s.coins -= 100; s.bet = true; addLog("Mt_: 'Aposta aceita.'", true, "Mt_"); save(); render(); } }
        
        function buy(t, c) {
            if(s.coins >= c) {
                s.coins -= c;
                if(t === 'xp') { s.x2 = true; setTimeout(() => { s.x2 = false; render(); }, 3600000); }
                else s.inv.push(t==='food'?'üçî FastFood':'üíé Item');
                sound(600); save(); render();
            }
        }

        function addLog(t, bot=false, botName="") {
            const l = document.getElementById('log');
            const entry = document.createElement('div');
            if(bot) {
                const isCosmin = botName === "Cosmin";
                entry.innerHTML = `<span class="${isCosmin ? 'cosmin-msg' : 'bot-msg'}">${botName.toUpperCase()}:</span> "${t}"`;
            } else entry.innerText = t;
            l.appendChild(entry);
            l.scrollTop = l.scrollHeight;
        }

        function render() {
            document.getElementById('lvlDisplay').innerText = `LVL ${s.lvl}`;
            document.getElementById('coins').innerText = s.coins;
            document.getElementById('xpBar').style.width = s.xp + "%";
            document.getElementById('waterBar').style.width = (s.water/3000)*100 + "%";
            document.getElementById('waterTxt').innerText = `${s.water}/3000ml`;
            document.getElementById('streakDisplay').innerText = `üî• STREAK: ${s.streak} DIAS`;
            document.getElementById('xp2x').style.display = s.x2 ? 'block' : 'none';
            document.getElementById('gymBtn').disabled = s.tasks.gym;
            document.getElementById('betLabel').innerText = s.bet ? "‚úÖ APOSTA ATIVA" : "";
            
            // Refei√ß√µes
            const meals = ["Caf√©", "Almo√ßo", "Lanche", "Jantar"];
            document.getElementById('mealArea').innerHTML = meals.map(m => `
                <button onclick="toggleMeal('${m}')" ${s.tasks.meals.includes(m) ? 'disabled' : ''} style="background:${s.tasks.meals.includes(m)?'#111':'#333'}; font-size: